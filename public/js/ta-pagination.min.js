"use strict";function _slicedToArray(t,i){return _arrayWithHoles(t)||_iterableToArrayLimit(t,i)||_unsupportedIterableToArray(t,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,i):void 0}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,s=new Array(i);n<i;n++)s[n]=t[n];return s}function _iterableToArrayLimit(t,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],s=!0,e=!1,a=void 0;try{for(var o,r=t[Symbol.iterator]();!(s=(o=r.next()).done)&&(n.push(o.value),!i||n.length!==i);s=!0);}catch(t){e=!0,a=t}finally{try{s||null==r.return||r.return()}finally{if(e)throw a}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}window.taPagination=function(){return{page:1,pagination:5,unify:!1,autoplay:!1,interval:!1,timing:0,elements:[],visible:[],initialized:!1,is_expand:!1,is_shrink:!1,has_next:!1,has_previous:!1,animating:!1,options:{page:1,pagination:1,duration:200,unify:!0,border:!1,autoplay:!1,interval:5e3,pauseonhover:!0,content:"content",navigation:"navigation",breakpoints:[],classAnimation:"ta-pagination-anim",classItem:"ta-pagination-item",classBorder:"ta-pagination-item-border",classHidden:"ta-pagination-item-hidden",classLazy:"ta-pagination-lazy"},init:function(t){var i=this;if(void 0!==t)for(var n=0,s=Object.entries(t);n<s.length;n++){var e=_slicedToArray(s[n],2),a=e[0],o=e[1];this.options[a]=o}for(var r=0,h=Object.entries(this.$el.dataset);r<h.length;r++){var p=_slicedToArray(h[r],2),l=p[0],c=p[1];void 0!==this.options[l]&&(this.options[l]=c)}if(this.options.pagination=parseInt(this.options.pagination),this.options.page=parseInt(this.options.page),this.options.duration=parseInt(this.options.duration),this.options.unify="true"===String(this.options.unify).toLowerCase(),this.options.border="true"===String(this.options.border).toLowerCase(),this.options.autoplay="true"===String(this.options.autoplay).toLowerCase(),this.options.interval=parseInt(this.options.interval),this.options.pauseonhover="true"===String(this.options.pauseonhover).toLowerCase(),"string"==typeof this.options.breakpoints)if(this.options.breakpoints.length>0)try{var u=JSON.parse(this.options.breakpoints);this.options.breakpoints=[];for(var d=0;d<u.length;d++){var g=this.options.unify;void 0!==u[d].unify&&(g="true"===String(u[d].unify).toLowerCase()),this.options.breakpoints.push({width:parseInt(u[d].width),pagination:parseInt(u[d].pagination),unify:g})}}catch(t){console.warn("TA-Pagination error: breakpoints are not valid JSON:",this.options.breakpoints),this.options.breakpoints=[]}else this.options.breakpoints=[];this.options.breakpoints.push({width:1,pagination:this.options.pagination,unify:this.options.unify});this.options.breakpoints.sort(function(t,i){return parseInt(t.width)<parseInt(i.width)?1:parseInt(i.width)<parseInt(t.width)?-1:0}),this.page=this.options.page,this.pagination=this.options.pagination,this.unify=this.options.unify,this.visible=this.getVisibleElements();var f=this.$refs[this.options.content].querySelectorAll("."+this.options.classItem);0===f.length&&(f=this.$refs[this.options.content].children);for(var v=0;v<f.length;v++)this.visible.includes(v)||f[v].classList.add(this.options.classHidden),v%this.pagination!=0&&this.options.border&&f[v].classList.add(this.options.classBorder),this.elements.push(f[v]);this.$el.style.setProperty("--ta-pagination-anim-duration",this.options.duration+"ms"),window.addEventListener("resize",function(){i.checkWindowWidth(),i.checkMaxHeight(),i.defineVisibleElements()}),this.$watch("animating",function(t){!1===t&&(i.checkExpand(),i.checkNavigation())}),this.checkExpand(),this.checkWindowWidth(),this.checkNavigation(),this.defineVisibleElements(),this.checkLazyLoading(),this.$nextTick(function(){setTimeout(function(){i.checkMaxHeight(),i.options.autoplay&&i.setAutoplay()},i.options.duration),i.initialized=!0})},getVisibleElements:function(){for(var t=[],i=0;i<this.pagination;i++){var n=(this.page-1)*this.pagination+i;t.push(n)}return t},setAutoplay:function(){var t=this;this.autoplay=!0,this.interval=setInterval(function(){!1!==t.autoplay&&(t.timing+=1e3,t.timing>=t.options.interval&&(t.timing=0,t.next()))},1e3),this.options.pauseonhover&&(this.$el.addEventListener("mouseover",function(){t.is_shrink&&(t.autoplay=!1)}),this.$el.addEventListener("mouseout",function(){!t.focusIsChild()&&t.is_shrink&&(t.autoplay=!0)})),window.addEventListener("focus",function(){!t.focusIsChild()&&t.is_shrink&&(t.autoplay=!0)}),window.addEventListener("blur",function(){t.is_shrink&&(t.autoplay=!1)})},checkMaxHeight:function(){if(!1!==this.unify){var t=0;void 0!==this.$refs[this.options.navigation]&&(t=this.$refs[this.options.navigation].offsetHeight,this.$el.style.setProperty("--ta-pagination-navigation-height","".concat(t,"px")));var i=0;this.elements.forEach(function(t){i<t.offsetHeight&&(i=t.offsetHeight)}),this.$el.style.setProperty("--".concat(this.options.classItem,"-height"),"".concat(i,"px"))}else this.$el.style.setProperty("--".concat(this.options.classItem,"-height"),"unset")},checkLazyLoading:function(){var t=this;this.elements.forEach(function(i){for(var n=i.getElementsByTagName("img"),s=function(i){if(void 0===n[i].dataset.src)return"continue";(a=new Image).onload=function(s){n[i].src=n[i].dataset.src,n[i].classList.remove(t.options.classLazy)},a.src=n[i].dataset.src},e=0;e<n.length;e++){var a;s(e)}})},checkWindowWidth:function(){if(0===this.options.breakpoints.length)return!1;for(var t=this.options.breakpoints,i=0;i<t.length;i++)if(window.innerWidth>parseInt(t[i].width)){void 0!==t[i].pagination&&(this.pagination=parseInt(t[i].pagination)),void 0!==t[i].unify&&(this.unify="true"===String(t[i].unify).toLowerCase());break}if(this.options.border)for(var n=0;n<this.elements.length;n++)n%this.pagination!=0?this.elements[n].classList.add(this.options.classBorder):this.elements[n].classList.remove(this.options.classBorder)},defineVisibleElements:function(){var t=this;this.visible=this.getVisibleElements(),this.elements.forEach(function(i,n){t.visible.includes(n)?i.classList.remove(t.options.classHidden):i.classList.add(t.options.classHidden)})},startExpand:function(){var t=this,i=this.visible,n=this.options.classAnimation+"-expand";this.animating=!0,this.elements.forEach(function(s,e){i.includes(e)||(s.classList.remove(t.options.classHidden),s.classList.add(n),s.addEventListener("animationend",function(i){i.target.classList.remove(n),t.animating=!1,t.is_expand=!0,t.is_shrink=!1},{once:!0}))})},focusIsChild:function(){return this.$el.contains(document.activeElement)},startShrink:function(){var t=this;this.checkWindowWidth(),this.visible=this.getVisibleElements();var i=this.options.classAnimation+"-shrink",n=0;this.elements.forEach(function(s,e){t.visible.includes(n)||(s.classList.add(i),t.animating=!0,s.addEventListener("animationend",function(n){t.animationEnd(n.target,"hide",i),t.animating=!1,t.is_shrink=!0,t.is_expand=!1},{once:!0})),n++})},startOut:function(t){var i=this,n=this.visible;this.visible=this.getVisibleElements();var s=this.options.classAnimation+"-"+t+"-out";this.elements.forEach(function(e,a){n.includes(a)&&(i.animating=!0,e.classList.add(s),e.addEventListener("animationend",function(n){i.animationEnd(n.target,"hide",s),i.startIn(t)},{once:!0}))})},startIn:function(t){var i=this,n=this.options.classAnimation+"-"+t+"-in";this.elements.forEach(function(t,s){i.visible.includes(s)&&(t.classList.remove(i.options.classHidden),t.classList.add(n),t.addEventListener("animationend",function(t){i.animationEnd(t.target,"show",n)},{once:!0}))})},animationEnd:function(t,i,n){t.classList.remove(n),"show"===i&&(this.animating=!1),"hide"===i?t.classList.add(this.options.classHidden):t.classList.remove(this.options.classHidden)},checkNavigation:function(){(this.page-1)*this.pagination+this.pagination>=this.elements.length?this.has_next=!1:this.has_next=!0,this.page<=1?this.has_previous=!1:this.has_previous=!0},checkExpand:function(){this.pagination===this.elements.length?(this.is_expand=!0,this.is_shrink=!1):this.pagination>=this.elements.length?(this.is_expand=!1,this.is_shrink=!1):(this.is_expand=!1,this.is_shrink=!0)},next:function(){this.animating||(this.has_next?this.page++:this.page=1,this.startOut("right"))},end:function(){this.animating||(this.page=Math.ceil(this.elements.length/this.pagination),this.startOut("right"))},previous:function(){this.animating||(this.has_previous?this.page--:this.page=Math.ceil(this.elements.length/this.pagination),this.startOut("left"))},start:function(){this.animating||(this.page=1,this.startOut("left"))},expand:function(){this.animating||(!0===this.options.autoplay&&(this.autoplay=!1),this.page=1,this.pagination=this.elements.length,this.startExpand())},shrink:function(){this.animating||(!0===this.options.autoplay&&(this.autoplay=!0),this.page=1,this.pagination=this.options.pagination,this.startShrink())}}};